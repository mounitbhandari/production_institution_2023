"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[1640],{1640:(E,g,r)=>{r.r(g),r.d(g,{AllIncomeReportModule:()=>j});var p=r(6895),c=r(4006),I=r(4144),s=r(9602),h=r(3238),e=r(4650);let A=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({}),t})();var u=r(7466),Z=r(5593),_=r(1740),T=r(585),R=r(8177),x=r(5722),S=r(4076),C=r(2210),v=r(4364),y=r(5620),M=r(2820),f=r(9549),U=r(805);function N(t,a){1&t&&(e.TgZ(0,"mat-error",19),e._uU(1," Start is required"),e.qZA())}function b(t,a){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,N,2,0,"mat-error",18),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.allIncomeReportFormGroup.controls.start_date.errors.required)}}function F(t,a){1&t&&(e.TgZ(0,"mat-error",19),e._uU(1,"End is required"),e.qZA())}function J(t,a){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"mat-error",18),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.allIncomeReportFormGroup.controls.end_date.errors.required)}}function D(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",27)(1,"span",28),e._UZ(2,"i",29),e.TgZ(3,"input",30),e.NdJ("input",function(i){e.CHM(o),e.oxw();const m=e.MAs(2),l=e.oxw();return e.KtG(m.filterGlobal(l.getEventValue(i),"contains"))}),e.qZA()()()}}function q(t,a){1&t&&(e.TgZ(0,"tr")(1,"th",31),e._uU(2,"Student Name "),e._UZ(3,"p-sortIcon",32),e.qZA(),e.TgZ(4,"th",33),e._uU(5,"Course Name "),e._UZ(6,"p-sortIcon",34),e.qZA(),e.TgZ(7,"th",35),e._uU(8,"Transaction Date "),e._UZ(9,"p-sortIcon",36),e.qZA(),e.TgZ(10,"th",37),e._uU(11,"Purpose "),e._UZ(12,"p-sortIcon",38),e.qZA(),e.TgZ(13,"th",39),e._uU(14,"Transaction Mode "),e._UZ(15,"p-sortIcon",40),e.qZA(),e.TgZ(16,"th",41),e._uU(17,"Fees Amount "),e._UZ(18,"p-sortIcon",42),e.qZA()())}function G(t,a){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"date"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",19),e._uU(13),e.ALo(14,"currency"),e.qZA()()),2&t){const o=a.$implicit;e.xp6(2),e.Oqu(o.student_name),e.xp6(2),e.Oqu(o.full_name),e.xp6(2),e.Oqu(e.xi3(7,6,o.transaction_date,"dd/MM/yyyy")),e.xp6(3),e.Oqu(o.comment),e.xp6(2),e.Oqu(o.ledger_name),e.xp6(2),e.Oqu(e.xi3(14,9,o.received_amount,"INR"))}}function L(t,a){if(1&t&&(e.TgZ(0,"tr")(1,"th",43),e._uU(2,"Gross Total"),e.qZA(),e.TgZ(3,"th",19),e._uU(4),e.ALo(5,"currency"),e.qZA()()),2&t){const o=e.oxw(2);e.xp6(4),e.Oqu(e.xi3(5,1,o.totalIncome,"INR"))}}const O=function(){return["student_name","full_name","received_amount","comment","ledger_name"]};function Q(t,a){if(1&t&&(e.TgZ(0,"div",20)(1,"p-table",21,22),e.YNc(3,D,4,0,"ng-template",23),e.YNc(4,q,19,0,"ng-template",24),e.YNc(5,G,15,12,"ng-template",25),e.YNc(6,L,6,4,"ng-template",26),e.qZA()()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("value",o.allIncomeListArray)("globalFilterFields",e.DdM(2,O))}}const Y=[{path:"",component:(()=>{class t{constructor(o,n){this.commonService=o,this.reportService=n,this.allIncomeListArray=[],this.isShowReport=!1,this.totalIncome=0,this.cols=[{field:"transaction_master_id",header:"Student To Course ID",customExportHeader:"Student To Course ID"},{field:"student_name"},{field:"full_name"},{field:"received_amount"}];const i=localStorage.getItem("user");i&&(this.UserID=JSON.parse(i).uniqueId,this.organisationId=JSON.parse(i).organisationId,console.log("user localUserID:",this.UserID),console.log("user organisationId:",this.organisationId))}ngOnInit(){const o=new Date;let n=(0,p.p6)(o,"yyyy-MM-dd","en");this.allIncomeReportFormGroup=new c.cw({start_date:new c.NI(n),end_date:new c.NI(n),searchTerm:new c.NI}),this.allIncomeListArray=[]}getEventValue(o){return o.target.value}setStartSQL(o){this.allIncomeReportFormGroup.patchValue({start_date:this.commonService.getSQLDate(o)})}setEndSQL(o){this.allIncomeReportFormGroup.patchValue({end_date:this.commonService.getSQLDate(o)})}clear(o){o.clear()}onIncomeReport(){this.isShowReport=!0,this.totalIncome=0,this.getAllIncomeObj={startDate:this.allIncomeReportFormGroup.value.start_date,endDate:this.allIncomeReportFormGroup.value.end_date,organisationId:this.organisationId},console.log(this.getAllIncomeObj),this.reportService.fetchAllIncomeReport(this.getAllIncomeObj).subscribe(o=>{this.allIncomeListArray=o.data,console.log("allIncomeListArray:",this.allIncomeListArray);for(let n of this.allIncomeListArray)this.totalIncome+=n.received_amount;console.log("Total",this.totalIncome)})}onKeyUp(o){}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(y.v),e.Y36(M.r))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-all-income-report"]],decls:31,vars:9,consts:[[1,"container-fluid","page"],[1,"page__box"],[1,"control-div"],[3,"formGroup"],[1,"row","p-3"],[1,"col-sm-3"],[2,"width","100%"],["matInput","","formControlName","start_date",3,"matDatepicker","dateInput"],["refStartDate",""],[4,"ngIf"],["matSuffix","",3,"for"],["start_date",""],["matInput","","formControlName","end_date",3,"matDatepicker","dateInput"],["refEndDate",""],["end_date",""],[1,"col-sm-2"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","page__content",4,"ngIf"],["class","text-right",4,"ngIf"],[1,"text-right"],[1,"page__content"],[3,"value","globalFilterFields"],["allIncomeList",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"p-d-flex"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pSortableColumn","student_name"],["field","student_name"],["pSortableColumn","full_name"],["field","full_name"],["pSortableColumn","transaction_date"],["field","transaction_date"],["pSortableColumn","comment"],["field","comment"],["pSortableColumn","ledger_name"],["field","ledger_name"],["pSortableColumn","received_amount"],["field","received_amount"],["colspan","5"]],template:function(o,n){if(1&o){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Income Report "),e.qZA(),e.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),e._uU(9,"Start Date"),e.qZA(),e.TgZ(10,"input",7,8),e.NdJ("dateInput",function(){e.CHM(i);const l=e.MAs(11);return e.KtG(n.setStartSQL(l.value))}),e.qZA(),e.YNc(12,b,2,1,"div",9),e._UZ(13,"mat-datepicker-toggle",10)(14,"mat-datepicker",null,11),e.qZA()(),e.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),e._uU(19,"End Date"),e.qZA(),e.TgZ(20,"input",12,13),e.NdJ("dateInput",function(){e.CHM(i);const l=e.MAs(21);return e.KtG(n.setEndSQL(l.value))}),e.qZA(),e.YNc(22,J,2,1,"div",9),e._UZ(23,"mat-datepicker-toggle",10)(24,"mat-datepicker",null,14),e.qZA()(),e.TgZ(26,"div",15)(27,"button",16),e.NdJ("click",function(){return n.onIncomeReport()}),e._uU(28,"Submit"),e.qZA()()(),e._UZ(29,"div",4),e.qZA()(),e.YNc(30,Q,7,3,"div",17),e.qZA()}if(2&o){const i=e.MAs(15),m=e.MAs(25);e.xp6(4),e.Q6J("formGroup",n.allIncomeReportFormGroup),e.xp6(6),e.Q6J("matDatepicker",i),e.xp6(2),e.Q6J("ngIf",n.allIncomeReportFormGroup.controls.start_date.errors&&n.allIncomeReportFormGroup.controls.start_date.touched),e.xp6(1),e.Q6J("for",i),e.xp6(7),e.Q6J("matDatepicker",m),e.xp6(2),e.Q6J("ngIf",n.allIncomeReportFormGroup.controls.end_date.errors&&n.allIncomeReportFormGroup.controls.end_date.touched),e.xp6(1),e.Q6J("for",m),e.xp6(4),e.Q6J("disabled",!n.allIncomeReportFormGroup.valid||n.allIncomeReportFormGroup.value.id),e.xp6(3),e.Q6J("ngIf",n.isShowReport)}},dependencies:[p.O5,f.TO,f.KE,f.hX,f.R9,I.Nt,s.Mq,s.hl,s.nW,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,u.iA,U.jx,u.lQ,u.fz,_.o,p.H9,p.uU],styles:[".page[_ngcontent-%COMP%]{color:#0c0c0c;min-height:100vh}.page__box[_ngcontent-%COMP%]{font-size:2.5em;padding:10px}.control-div[_ngcontent-%COMP%]{margin-top:2.2%;width:80%;height:10vh;background-color:#b0b5b7;margin-left:10%;border-radius:10px}.page__content[_ngcontent-%COMP%]{margin-top:2.2%;width:80%;height:100vh;background-color:transparent;margin-left:10%;border-radius:10px}  .mat-form-field .mat-input-element{color:#080808;font-size:medium;font-family:Roboto,sans-serif}  .mat-form-field .mat-form-field-label{color:#0a0a0a;font-family:Roboto,sans-serif;font-size:large}  datepicker-value-example .mat-form-field-label{color:#210dd4}  .mat-datepicker-toggle{color:#43b2ee}  .mat-form-field-underline{background:#43b2ee}.mat-raised-button[_ngcontent-%COMP%]{background-color:#000}"]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(Y),v.Bz]}),t})(),j=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,P,I.c,s.FA,h.XK,c.UX,A,u.U$,Z.hJ,_.j,T._8,R.JH,x.q4,S.vI,C.kW]}),t})()}}]);
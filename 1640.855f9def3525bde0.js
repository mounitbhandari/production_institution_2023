"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[1640],{1640:(x,v,r)=>{r.r(v),r.d(v,{AllIncomeReportModule:()=>Y});var s=r(6895),p=r(4006),u=r(4144),f=r(9602),_=r(3238),t=r(4650);let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({}),e})();var d=r(7466),R=r(5593),i=r(1740),l=r(585),S=r(8177),C=r(5722),L=r(4076),M=r(2210),Z=r(4364),y=r(5620),D=r(2820),I=r(9549),U=r(805);function E(e,a){1&e&&(t.TgZ(0,"mat-error",19),t._uU(1," Start is required"),t.qZA())}function b(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,E,2,0,"mat-error",18),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.allIncomeReportFormGroup.controls.start_date.errors.required)}}function P(e,a){1&e&&(t.TgZ(0,"mat-error",19),t._uU(1,"End is required"),t.qZA())}function N(e,a){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,P,2,0,"mat-error",18),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.allIncomeReportFormGroup.controls.end_date.errors.required)}}function O(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"div",27)(1,"span",28),t._UZ(2,"i",29),t.TgZ(3,"input",30),t.NdJ("input",function(m){t.CHM(o),t.oxw();const g=t.MAs(2),c=t.oxw();return t.KtG(g.filterGlobal(c.getEventValue(m),"contains"))}),t.qZA()()()}}function F(e,a){1&e&&(t.TgZ(0,"tr")(1,"th",31),t._uU(2,"Student Name "),t._UZ(3,"p-sortIcon",32),t.qZA(),t.TgZ(4,"th",33),t._uU(5,"Course Name "),t._UZ(6,"p-sortIcon",34),t.qZA(),t.TgZ(7,"th",35),t._uU(8,"Transaction Date "),t._UZ(9,"p-sortIcon",36),t.qZA(),t.TgZ(10,"th",37),t._uU(11,"Purpose "),t._UZ(12,"p-sortIcon",38),t.qZA(),t.TgZ(13,"th",39),t._uU(14,"Transaction Mode "),t._UZ(15,"p-sortIcon",40),t.qZA(),t.TgZ(16,"th",41),t._uU(17,"Fees Amount "),t._UZ(18,"p-sortIcon",42),t.qZA()())}function J(e,a){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td",19),t._uU(13),t.ALo(14,"currency"),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.Oqu(o.student_name),t.xp6(2),t.Oqu(o.full_name),t.xp6(2),t.Oqu(t.xi3(7,6,o.transaction_date,"dd/MM/yyyy")),t.xp6(3),t.Oqu(o.comment),t.xp6(2),t.Oqu(o.ledger_name),t.xp6(2),t.Oqu(t.xi3(14,9,o.received_amount,"INR"))}}function G(e,a){if(1&e&&(t.TgZ(0,"tr")(1,"th",43),t._uU(2,"Gross Total"),t.qZA(),t.TgZ(3,"th",19),t._uU(4),t.ALo(5,"currency"),t.qZA()()),2&e){const o=t.oxw(2);t.xp6(4),t.Oqu(t.xi3(5,1,o.totalIncome,"INR"))}}const j=function(){return["student_name","full_name","received_amount","comment","ledger_name"]};function K(e,a){if(1&e&&(t.TgZ(0,"div",20)(1,"p-table",21,22),t.YNc(3,O,4,0,"ng-template",23),t.YNc(4,F,19,0,"ng-template",24),t.YNc(5,J,15,12,"ng-template",25),t.YNc(6,G,6,4,"ng-template",26),t.qZA()()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("value",o.allIncomeListArray)("globalFilterFields",t.DdM(2,j))}}const Q=[{path:"",component:(()=>{class e{constructor(o,n){this.commonService=o,this.reportService=n,this.allIncomeListArray=[],this.isShowReport=!1,this.totalIncome=0,this.cols=[{field:"transaction_master_id",header:"Student To Course ID",customExportHeader:"Student To Course ID"},{field:"student_name"},{field:"full_name"},{field:"received_amount"}];const m=localStorage.getItem("user");m&&(this.UserID=JSON.parse(m).uniqueId,this.organisationId=JSON.parse(m).organisationId,console.log("user localUserID:",this.UserID),console.log("user organisationId:",this.organisationId))}ngOnInit(){const o=new Date;let n=(0,s.p6)(o,"yyyy-MM-dd","en");this.allIncomeReportFormGroup=new p.cw({start_date:new p.NI(n),end_date:new p.NI(n),searchTerm:new p.NI}),this.allIncomeListArray=[]}getEventValue(o){return o.target.value}setStartSQL(o){this.allIncomeReportFormGroup.patchValue({start_date:this.commonService.getSQLDate(o)})}setEndSQL(o){this.allIncomeReportFormGroup.patchValue({end_date:this.commonService.getSQLDate(o)})}clear(o){o.clear()}onIncomeReport(){this.isShowReport=!0,this.totalIncome=0,this.getAllIncomeObj={startDate:this.allIncomeReportFormGroup.value.start_date,endDate:this.allIncomeReportFormGroup.value.end_date,organisationId:this.organisationId},console.log(this.getAllIncomeObj),this.reportService.fetchAllIncomeReport(this.getAllIncomeObj).subscribe(o=>{this.allIncomeListArray=o.data,console.log("allIncomeListArray:",this.allIncomeListArray);for(let n of this.allIncomeListArray)this.totalIncome+=n.received_amount;console.log("Total",this.totalIncome)})}onKeyUp(o){}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(y.v),t.Y36(D.r))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-all-income-report"]],decls:31,vars:9,consts:[[1,"container-fluid","page"],[1,"page__box"],[1,"control-div"],[3,"formGroup"],[1,"row","p-3"],[1,"col-sm-3"],[2,"width","100%"],["matInput","","formControlName","start_date",3,"matDatepicker","dateInput"],["refStartDate",""],[4,"ngIf"],["matSuffix","",3,"for"],["start_date",""],["matInput","","formControlName","end_date",3,"matDatepicker","dateInput"],["refEndDate",""],["end_date",""],[1,"col-sm-2"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","page__content",4,"ngIf"],["class","text-right",4,"ngIf"],[1,"text-right"],[1,"page__content"],[3,"value","globalFilterFields"],["allIncomeList",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"p-d-flex"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pSortableColumn","student_name"],["field","student_name"],["pSortableColumn","full_name"],["field","full_name"],["pSortableColumn","transaction_date"],["field","transaction_date"],["pSortableColumn","comment"],["field","comment"],["pSortableColumn","ledger_name"],["field","ledger_name"],["pSortableColumn","received_amount"],["field","received_amount"],["colspan","5"]],template:function(o,n){if(1&o){const m=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Income Report "),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Start Date"),t.qZA(),t.TgZ(10,"input",7,8),t.NdJ("dateInput",function(){t.CHM(m);const c=t.MAs(11);return t.KtG(n.setStartSQL(c.value))}),t.qZA(),t.YNc(12,b,2,1,"div",9),t._UZ(13,"mat-datepicker-toggle",10)(14,"mat-datepicker",null,11),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19,"End Date"),t.qZA(),t.TgZ(20,"input",12,13),t.NdJ("dateInput",function(){t.CHM(m);const c=t.MAs(21);return t.KtG(n.setEndSQL(c.value))}),t.qZA(),t.YNc(22,N,2,1,"div",9),t._UZ(23,"mat-datepicker-toggle",10)(24,"mat-datepicker",null,14),t.qZA()(),t.TgZ(26,"div",15)(27,"button",16),t.NdJ("click",function(){return n.onIncomeReport()}),t._uU(28,"Submit"),t.qZA()()(),t._UZ(29,"div",4),t.qZA()(),t.YNc(30,K,7,3,"div",17),t.qZA()}if(2&o){const m=t.MAs(15),g=t.MAs(25);t.xp6(4),t.Q6J("formGroup",n.allIncomeReportFormGroup),t.xp6(6),t.Q6J("matDatepicker",m),t.xp6(2),t.Q6J("ngIf",n.allIncomeReportFormGroup.controls.start_date.errors&&n.allIncomeReportFormGroup.controls.start_date.touched),t.xp6(1),t.Q6J("for",m),t.xp6(7),t.Q6J("matDatepicker",g),t.xp6(2),t.Q6J("ngIf",n.allIncomeReportFormGroup.controls.end_date.errors&&n.allIncomeReportFormGroup.controls.end_date.touched),t.xp6(1),t.Q6J("for",g),t.xp6(4),t.Q6J("disabled",!n.allIncomeReportFormGroup.valid||n.allIncomeReportFormGroup.value.id),t.xp6(3),t.Q6J("ngIf",n.isShowReport)}},dependencies:[s.O5,I.TO,I.KE,I.hX,I.R9,u.Nt,f.Mq,f.hl,f.nW,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,d.iA,U.jx,d.lQ,d.fz,i.o,s.H9,s.uU],styles:[".page[_ngcontent-%COMP%]{color:#0c0c0c;min-height:100vh}.page__box[_ngcontent-%COMP%]{font-size:2.5em;padding:10px}.control-div[_ngcontent-%COMP%]{margin-top:2.2%;width:80%;height:10vh;background-color:#b0b5b7;margin-left:10%;border-radius:10px}.page__content[_ngcontent-%COMP%]{margin-top:2.2%;width:80%;height:100vh;background-color:transparent;margin-left:10%;border-radius:10px}  .mat-form-field .mat-input-element{color:#080808;font-size:medium;font-family:Roboto,sans-serif}  .mat-form-field .mat-form-field-label{color:#0a0a0a;font-family:Roboto,sans-serif;font-size:large}  datepicker-value-example .mat-form-field-label{color:#210dd4}  .mat-datepicker-toggle{color:#43b2ee}  .mat-form-field-underline{background:#43b2ee}.mat-raised-button[_ngcontent-%COMP%]{background-color:#000}"]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[Z.Bz.forChild(Q),Z.Bz]}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,q,u.c,f.FA,_.XK,p.UX,A,d.U$,R.hJ,i.j,l._8,S.JH,C.q4,L.vI,M.kW]}),e})()},2820:(x,v,r)=>{r.d(v,{r:()=>A});var s=r(262),p=r(7579),u=r(8505),f=r(4650),_=r(5620),t=r(4889),T=r(529);let A=(()=>{class d{constructor(i,l,S){this.commonService=i,this.errorService=l,this.http=S,this.incomeReportList=[],this.incomeReportSubject=new p.x}fetchAllReceiptIncomeReport(i){return this.http.get(this.commonService.getAPI()+"/getAllIncomeReport/"+i).pipe((0,s.K)(this.errorService.serverError),(0,u.b)(l=>{this.incomeReportList=l.data,this.incomeReportSubject.next([...this.incomeReportList]),console.log("all Income:",this.incomeReportList)}))}fetchWorkingDaysReport(i){return this.http.get(this.commonService.getAPI()+"/transactions/workingDays/"+i).pipe((0,s.K)(this.errorService.serverError),(0,u.b)(l=>{this.incomeReportList=l.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchStudentBirthDayDaysReport(i){return this.http.get(this.commonService.getAPI()+"/reportStudentBirthday/"+i).pipe((0,s.K)(this.errorService.serverError),(0,u.b)(l=>{this.incomeReportList=l.data}))}fetchStudentUpcomingDueListReport(i){return this.http.get(this.commonService.getAPI()+"/reportUpcomingDueList/"+i).pipe((0,s.K)(this.errorService.serverError),(0,u.b)(l=>{this.incomeReportList=l.data}))}fetchStudentToCourseRegistrationReport(i){return this.http.get(this.commonService.getAPI()+"/reportStudentToCourseRegistrationList/"+i).pipe((0,s.K)(this.errorService.serverError),(0,u.b)(l=>{this.incomeReportList=l.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchStudentToCourseRegistrationReportLedgerId(i){return this.http.get(this.commonService.getAPI()+"/reportStudentToCourseRegistrationListLedgerId/"+i).pipe((0,s.K)(this.errorService.serverError),(0,u.b)(l=>{this.incomeReportList=l.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchAllIncomeReport(i){return this.http.post(this.commonService.getAPI()+"/getAllIncomeListReport",i).pipe((0,s.K)(this.errorService.serverError),(0,u.b)(l=>{this.incomeReportList=l.data,this.incomeReportSubject.next([...this.incomeReportList])}))}}return d.\u0275fac=function(i){return new(i||d)(f.LFG(_.v),f.LFG(t.T),f.LFG(T.eN))},d.\u0275prov=f.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);
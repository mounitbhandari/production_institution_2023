"use strict";(self.webpackChunkadminDesign=self.webpackChunkadminDesign||[]).push([[1640],{1640:(D,v,i)=>{i.r(v),i.d(v,{AllIncomeReportModule:()=>q});var s=i(6895),m=i(4006),c=i(4144),g=i(9602),_=i(3238),t=i(4650);let S=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({}),e})();var d=i(7466),A=i(5593),n=i(1740),o=i(585),R=i(8177),Z=i(5722),b=i(4076),x=i(2210),T=i(4364),C=i(5620),y=i(2820),I=i(9549),M=i(805);function E(e,l){1&e&&(t.TgZ(0,"mat-error",19),t._uU(1," Start is required"),t.qZA())}function P(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,E,2,0,"mat-error",18),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.allIncomeReportFormGroup.controls.start_date.errors.required)}}function U(e,l){1&e&&(t.TgZ(0,"mat-error",19),t._uU(1,"End is required"),t.qZA())}function N(e,l){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,U,2,0,"mat-error",18),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.allIncomeReportFormGroup.controls.end_date.errors.required)}}function w(e,l){if(1&e){const r=t.EpF();t.TgZ(0,"div",27)(1,"span",28),t._UZ(2,"i",29),t.TgZ(3,"input",30),t.NdJ("input",function(u){t.CHM(r),t.oxw();const h=t.MAs(2),p=t.oxw();return t.KtG(h.filterGlobal(p.getEventValue(u),"contains"))}),t.qZA()()()}}function O(e,l){1&e&&(t.TgZ(0,"tr")(1,"th",31),t._uU(2,"Student Name "),t._UZ(3,"p-sortIcon",32),t.qZA(),t.TgZ(4,"th",33),t._uU(5,"Course Name "),t._UZ(6,"p-sortIcon",34),t.qZA(),t.TgZ(7,"th",35),t._uU(8,"Transaction Date "),t._UZ(9,"p-sortIcon",36),t.qZA(),t.TgZ(10,"th",37),t._uU(11,"Purpose "),t._UZ(12,"p-sortIcon",38),t.qZA(),t.TgZ(13,"th",39),t._uU(14,"Transaction Mode "),t._UZ(15,"p-sortIcon",40),t.qZA(),t.TgZ(16,"th",41),t._uU(17,"Fees Amount "),t._UZ(18,"p-sortIcon",42),t.qZA()())}function F(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td",19),t._uU(13),t.ALo(14,"currency"),t.qZA()()),2&e){const r=l.$implicit;t.xp6(2),t.Oqu(r.student_name),t.xp6(2),t.Oqu(r.full_name),t.xp6(2),t.Oqu(t.xi3(7,6,r.transaction_date,"dd/MM/yyyy")),t.xp6(3),t.Oqu(r.comment),t.xp6(2),t.Oqu(r.ledger_name),t.xp6(2),t.Oqu(t.xi3(14,9,r.received_amount,"INR"))}}function K(e,l){if(1&e&&(t.TgZ(0,"tr")(1,"th",43),t._uU(2,"Gross Total"),t.qZA(),t.TgZ(3,"th",19),t._uU(4),t.ALo(5,"currency"),t.qZA()()),2&e){const r=t.oxw(2);t.xp6(4),t.Oqu(t.xi3(5,1,r.totalIncome,"INR"))}}const J=function(){return["student_name","full_name","received_amount","comment","ledger_name"]};function G(e,l){if(1&e&&(t.TgZ(0,"div",20)(1,"p-table",21,22),t.YNc(3,w,4,0,"ng-template",23),t.YNc(4,O,19,0,"ng-template",24),t.YNc(5,F,15,12,"ng-template",25),t.YNc(6,K,6,4,"ng-template",26),t.qZA()()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("value",r.allIncomeListArray)("globalFilterFields",t.DdM(2,J))}}const j=[{path:"",component:(()=>{class e{constructor(r,a){this.commonService=r,this.reportService=a,this.allIncomeListArray=[],this.isShowReport=!1,this.totalIncome=0,this.cols=[{field:"transaction_master_id",header:"Student To Course ID",customExportHeader:"Student To Course ID"},{field:"student_name"},{field:"full_name"},{field:"received_amount"}];const u=localStorage.getItem("user");u&&(this.UserID=JSON.parse(u).uniqueId,this.organisationId=JSON.parse(u).organisationId,console.log("user localUserID:",this.UserID),console.log("user organisationId:",this.organisationId))}ngOnInit(){const r=new Date;let a=(0,s.p6)(r,"yyyy-MM-dd","en");this.allIncomeReportFormGroup=new m.cw({start_date:new m.NI(a),end_date:new m.NI(a),searchTerm:new m.NI}),this.allIncomeListArray=[]}getEventValue(r){return r.target.value}setStartSQL(r){this.allIncomeReportFormGroup.patchValue({start_date:this.commonService.getSQLDate(r)})}setEndSQL(r){this.allIncomeReportFormGroup.patchValue({end_date:this.commonService.getSQLDate(r)})}clear(r){r.clear()}onIncomeReport(){this.isShowReport=!0,this.totalIncome=0,this.getAllIncomeObj={startDate:this.allIncomeReportFormGroup.value.start_date,endDate:this.allIncomeReportFormGroup.value.end_date,organisationId:this.organisationId},console.log(this.getAllIncomeObj),this.reportService.fetchAllIncomeReport(this.getAllIncomeObj).subscribe(r=>{this.allIncomeListArray=r.data,console.log("allIncomeListArray:",this.allIncomeListArray);for(let a of this.allIncomeListArray)this.totalIncome+=a.received_amount;console.log("Total",this.totalIncome)})}onKeyUp(r){}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(C.v),t.Y36(y.r))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-all-income-report"]],decls:31,vars:9,consts:[[1,"container-fluid","page"],[1,"page__box"],[1,"control-div"],[3,"formGroup"],[1,"row","p-3"],[1,"col-sm-3"],[2,"width","100%"],["matInput","","formControlName","start_date",3,"matDatepicker","dateInput"],["refStartDate",""],[4,"ngIf"],["matSuffix","",3,"for"],["start_date",""],["matInput","","formControlName","end_date",3,"matDatepicker","dateInput"],["refEndDate",""],["end_date",""],[1,"col-sm-2"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["class","page__content",4,"ngIf"],["class","text-right",4,"ngIf"],[1,"text-right"],[1,"page__content"],[3,"value","globalFilterFields"],["allIncomeList",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"p-d-flex"],[1,"p-input-icon-left","p-ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search keyword",3,"input"],["pSortableColumn","student_name"],["field","student_name"],["pSortableColumn","full_name"],["field","full_name"],["pSortableColumn","transaction_date"],["field","transaction_date"],["pSortableColumn","comment"],["field","comment"],["pSortableColumn","ledger_name"],["field","ledger_name"],["pSortableColumn","received_amount"],["field","received_amount"],["colspan","5"]],template:function(r,a){if(1&r){const u=t.EpF();t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Income Report "),t.qZA(),t.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Start Date"),t.qZA(),t.TgZ(10,"input",7,8),t.NdJ("dateInput",function(){t.CHM(u);const p=t.MAs(11);return t.KtG(a.setStartSQL(p.value))}),t.qZA(),t.YNc(12,P,2,1,"div",9),t._UZ(13,"mat-datepicker-toggle",10)(14,"mat-datepicker",null,11),t.qZA()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19,"End Date"),t.qZA(),t.TgZ(20,"input",12,13),t.NdJ("dateInput",function(){t.CHM(u);const p=t.MAs(21);return t.KtG(a.setEndSQL(p.value))}),t.qZA(),t.YNc(22,N,2,1,"div",9),t._UZ(23,"mat-datepicker-toggle",10)(24,"mat-datepicker",null,14),t.qZA()(),t.TgZ(26,"div",15)(27,"button",16),t.NdJ("click",function(){return a.onIncomeReport()}),t._uU(28,"Submit"),t.qZA()()(),t._UZ(29,"div",4),t.qZA()(),t.YNc(30,G,7,3,"div",17),t.qZA()}if(2&r){const u=t.MAs(15),h=t.MAs(25);t.xp6(4),t.Q6J("formGroup",a.allIncomeReportFormGroup),t.xp6(6),t.Q6J("matDatepicker",u),t.xp6(2),t.Q6J("ngIf",a.allIncomeReportFormGroup.controls.start_date.errors&&a.allIncomeReportFormGroup.controls.start_date.touched),t.xp6(1),t.Q6J("for",u),t.xp6(7),t.Q6J("matDatepicker",h),t.xp6(2),t.Q6J("ngIf",a.allIncomeReportFormGroup.controls.end_date.errors&&a.allIncomeReportFormGroup.controls.end_date.touched),t.xp6(1),t.Q6J("for",h),t.xp6(4),t.Q6J("disabled",!a.allIncomeReportFormGroup.valid||a.allIncomeReportFormGroup.value.id),t.xp6(3),t.Q6J("ngIf",a.isShowReport)}},dependencies:[s.O5,I.TO,I.KE,I.hX,I.R9,c.Nt,g.Mq,g.hl,g.nW,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,d.iA,M.jx,d.lQ,d.fz,n.o,s.H9,s.uU],styles:[".page[_ngcontent-%COMP%]{color:#0c0c0c;min-height:100vh}.page__box[_ngcontent-%COMP%]{font-size:2.5em;padding:10px}.control-div[_ngcontent-%COMP%]{margin-top:2.2%;width:80%;height:10vh;background-color:#b0b5b7;margin-left:10%;border-radius:10px}.page__content[_ngcontent-%COMP%]{margin-top:2.2%;width:80%;height:100vh;background-color:transparent;margin-left:10%;border-radius:10px}  .mat-form-field .mat-input-element{color:#080808;font-size:medium;font-family:Roboto,sans-serif}  .mat-form-field .mat-form-field-label{color:#0a0a0a;font-family:Roboto,sans-serif;font-size:large}  datepicker-value-example .mat-form-field-label{color:#210dd4}  .mat-datepicker-toggle{color:#43b2ee}  .mat-form-field-underline{background:#43b2ee}.mat-raised-button[_ngcontent-%COMP%]{background-color:#000}"]}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[T.Bz.forChild(j),T.Bz]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.ez,Q,c.c,g.FA,_.XK,m.UX,S,d.U$,A.hJ,n.j,o._8,R.JH,Z.q4,b.vI,x.kW]}),e})()},2820:(D,v,i)=>{i.d(v,{r:()=>S});var s=i(262),m=i(7579),c=i(8505),g=i(4650),_=i(5620),t=i(4889),L=i(529);let S=(()=>{class d{constructor(n,o,R){this.commonService=n,this.errorService=o,this.http=R,this.incomeReportList=[],this.newsDataList=[],this.incomeReportSubject=new m.x}fetchPivotTableIncomeList(n){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getPivotTableIncomeListReport/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.newsDataList=o.data}))}fetchPivotTableAdmissionList(n){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getPivotTableAdmissionList/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.newsDataList=o.data}))}fetchStudentMarksList(n){return this.newsDataList=[],this.http.post(this.commonService.getAPI()+"/getMarkStudents",n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.newsDataList=o.data}))}fetchSubjectListByCourseId(n){return this.newsDataList=[],this.http.get(this.commonService.getAPI()+"/getSubjectsByCourseId/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.newsDataList=o.data}))}fetchStudentNewsListReport(n){return this.http.post(this.commonService.getAPI()+"/getStudentNewsList",n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{console.log("at service newsDataList:",o),1===o.success&&this.newsDataList.unshift(o.data)}))}fetchStudentSyllabusListReport(n){return this.http.post(this.commonService.getAPI()+"/getStudentSyllabusList",n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{console.log("at service newsDataList:",o),1===o.success&&this.newsDataList.unshift(o.data)}))}fetchStudentAssignmentListReport(n){return this.http.post(this.commonService.getAPI()+"/getStudentAssignmentList",n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{console.log("at service newsDataList:",o),1===o.success&&this.newsDataList.unshift(o.data)}))}updateNewsStatus(n){return this.http.patch(this.commonService.getAPI()+"/updateNewsStatus",n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{console.log("at news status update",o),1===o.success&&this.newsDataList.unshift(o.data)}))}fetchNewsListReport(n){return this.http.get(this.commonService.getAPI()+"/getNewsList/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.newsDataList=o.data}))}fetchSyllabusListReport(n){return this.http.get(this.commonService.getAPI()+"/getSyllabusList/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.newsDataList=o.data}))}fetchAssignmentListReport(n){return this.http.get(this.commonService.getAPI()+"/getAssignmentList/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.newsDataList=o.data}))}saveNews(n){return this.http.post(this.commonService.getAPI()+"/saveNews",n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{console.log("at service newsDataList:",o),1===o.success&&this.newsDataList.unshift(o.data)}))}fetchAllReceiptIncomeReport(n){return this.http.get(this.commonService.getAPI()+"/getAllIncomeReport/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.incomeReportList=o.data,this.incomeReportSubject.next([...this.incomeReportList]),console.log("all Income:",this.incomeReportList)}))}fetchWorkingDaysReport(n){return this.http.get(this.commonService.getAPI()+"/transactions/workingDays/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.incomeReportList=o.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchStudentBirthDayDaysReport(n){return this.http.get(this.commonService.getAPI()+"/reportStudentBirthday/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.incomeReportList=o.data}))}fetchStudentUpcomingDueListReport(n){return this.http.get(this.commonService.getAPI()+"/reportUpcomingDueList/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.incomeReportList=o.data}))}fetchStudentToCourseRegistrationReport(n){return this.http.get(this.commonService.getAPI()+"/reportStudentToCourseRegistrationList/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.incomeReportList=o.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchStudentToCourseRegistrationReportLedgerId(n){return this.http.get(this.commonService.getAPI()+"/reportStudentToCourseRegistrationListLedgerId/"+n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.incomeReportList=o.data,this.incomeReportSubject.next([...this.incomeReportList])}))}fetchAllIncomeReport(n){return this.http.post(this.commonService.getAPI()+"/getAllIncomeListReport",n).pipe((0,s.K)(this.errorService.serverError),(0,c.b)(o=>{this.incomeReportList=o.data,this.incomeReportSubject.next([...this.incomeReportList])}))}}return d.\u0275fac=function(n){return new(n||d)(g.LFG(_.v),g.LFG(t.T),g.LFG(L.eN))},d.\u0275prov=g.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);